import{H as a,O as e,L as t,B as s,A as i,D as n}from"./index-DeXclsUq.js";import{h as r}from"./useDayjs.C3ha3cy2.js";const l={initParam:{},isPageable:!0,dataCallBack:()=>{}},g=(r,g={})=>{g=Object.assign(l,g);const c=a({tableData:[],pagination:{page:1,size:10,page_count:0},searchParam:{},searchInitParam:{},totalParam:{},loading:!1,responseData:null}),o=e((()=>({page:c.pagination.page,size:c.pagination.size}))),m=async()=>{try{Object.assign(c.totalParam,g.isPageable?o.value:{},g.initParam),c.loading=!0,s({title:"加载中。。。"});const a=await r(c.totalParam);c.responseData=a,g.dataCallBack&&g.dataCallBack(a),c.tableData=g.isPageable?a.list:a,g.isPageable&&p({page:a.page,size:a.size,page_count:a.page_count})}catch(a){i({title:a.message,icon:"none"})}finally{n(),c.loading=!1}},p=a=>{Object.assign(c.pagination,a)},P=async a=>{c.pagination.page=1,c.searchParam=a,(()=>{c.totalParam={};let a={};for(let e in c.searchParam)(c.searchParam[e]||!1===c.searchParam[e]||0===c.searchParam[e])&&(a[e]=c.searchParam[e]);Object.assign(c.totalParam,a,g.isPageable?o.value:{})})(),await m()};return{...t(c),getTableData:m,handleCurrentChange:async a=>{a<=c.pagination.page_count&&c.pagination.size===c.tableData.length&&(c.pagination.page=a,await m())},handleSizeChange:async a=>{c.pagination.page=1,c.pagination.size=a,await m()},search:P,reset:async()=>{c.searchParam={},Object.keys(c.searchInitParam).forEach((a=>{c.searchParam[a]=c.searchInitParam[a]})),await P()}}};function c(a){return r.request({method:"GET",url:"/api/v1/medal/list",custom:{isAuth:a.my_self},params:a})}export{c as g,g as u};
